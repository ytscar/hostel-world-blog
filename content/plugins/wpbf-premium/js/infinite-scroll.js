"use strict";!function(r,e){var s,c,n=r.extend({scroll_item_selector:!1,scroll_content_selector:!1,scroll_next_selector:!1,is_shop:!1,loader:!1,isotope:!1},{scroll_item_selector:wpbf_infinte_scroll_object.item_Selector,scroll_content_selector:wpbf_infinte_scroll_object.content_Selector,scroll_next_selector:wpbf_infinte_scroll_object.next_Selector,is_shop:!0,loader:wpbf_infinte_scroll_object.image_loader,isotope:wpbf_infinte_scroll_object.isotope}),i=!1,_=!1,a=r(n.scroll_next_selector).attr("href");r(".pagination").css({display:"none"}),0==!r(n.post_scroll_next_selector).length&&0==!r(n.scroll_item_selector).length&&0==!r(n.scroll_content_selector).length&&(_=!0),0!=r(n.scroll_next_selector).length?(s=r(n.scroll_content_selector).find(n.scroll_item_selector).first().nextUntil(".wpbf-infinite-first",n.scroll_item_selector).length+1,c=function(e,t,l){var o=t-e.prevUntil(".wpbf-infinite-last",n.scroll_item_selector).length,s=0;l.each(function(){var e=r(this);s++,e.removeClass("wpbf-infinite-first"),e.removeClass("wpbf-infinite-last"),(s-o)%t!=0&&(s-(o-1))%t!=0||e.addClass("wpbf-infinite-last")})},r(e).on("scroll touchstart",function(){var o,e=r(this),t=r(n.scroll_item_selector).last().offset();!i&&!_&&e.scrollTop()>=Math.abs(t.top-(e.height()-150))&&(o=r(n.scroll_content_selector).find(n.scroll_item_selector).last(),n.loader&&r(n.scroll_content_selector).append('<div class="wpbf-scroll-loader"><center><img src="'+n.loader+'"/></center><br></div>'),i=!0,r.ajax({url:a,dataType:"html",success:function(e){var t=r(e),e=t.find(n.scroll_item_selector),t=t.find(n.scroll_next_selector);if(t.length?a=t.attr("href"):_=!0,!o.hasClass("wpbf-infinite-last")&&n.is_shop&&c(o,s,e),o.after(e),wpbf_infinte_scroll_object.isotope){var l=r(".wpbf-post-grid-masonry");if(!l.length)return;l.isotope("appended",e),e.imagesLoaded().progress(function(){l.isotope("layout")})}e.css({opacity:"0"}),r(".wpbf-scroll-loader").remove(),e.fadeTo(800,1,function(){i=!1})}}))})):_=!0}(jQuery,window,document);