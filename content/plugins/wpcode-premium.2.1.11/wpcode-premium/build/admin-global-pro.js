!function(){var e={812:function(){const e=window.WPCodePostMetabox||function(e,t,o){const n={l18n:t.wpcode,snippet_page:1,loaded_snippets:!1,revisions_dirty:!0,init(){n.should_init()&&(n.init_load_snippet_chooser(),n.init_hide_insert_number(),n.init_refresh_revisions(),n.init_revisions_listener())},should_init:()=>(n.snippet_chooser=o("#wpcode-choose-snippets"),n.picked_snippets=o("#wpcode-picked-snippets"),n.load_more_button=o("#wpcode-metabox-load-more"),n.search_input=o("#wpcode-search-snippets"),n.no_snippets=o("#wpcode-no-snippets-selected"),n.load_spinner=o("#wpcode-chooser-spinner"),n.snippet_chooser.length>0),init_load_snippet_chooser(){n.init_choose_event(),n.init_load_more_event(),n.init_remove_snippet(),n.init_search(),n.init_drawer(),n.maybe_show_no_snippets()},load_snippets(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=n.search_input.val();e&&(n.snippet_chooser.empty(),n.snippet_page=1),n.load_spinner.show(),o.post(ajaxurl,{action:"wpcode_load_snippets",_wpnonce:n.l18n.nonce,page:n.snippet_page,post_id:n.l18n.post_id,selected:n.get_selected_ids(),search:t}).then((function(e){n.load_spinner.hide(),e.success&&(e.data.snippets&&e.data.snippets.length>0?(n.snippet_chooser.append(e.data.snippets),n.snippet_page++,e.data.snippets.length<10?n.load_more_button.hide():n.load_more_button.show()):n.load_more_button.hide())}))},init_choose_event(){n.snippet_chooser.on("change",":checkbox",(function(){const e=o(this).val();this.checked?n.load_selected_snippet(e):n.picked_snippets.find("#wpcode-selected-snippet-"+e).remove()}))},load_selected_snippet(e){n.load_spinner.show(),o.post(ajaxurl,{action:"wpcode_load_selected_snippet",_wpnonce:n.l18n.nonce,snippet_id:e}).then((function(e){n.load_spinner.hide(),e.success&&(n.picked_snippets.append(e.data.snippet),n.maybe_show_no_snippets())}))},init_load_more_event(){n.load_more_button.on("click",(function(e){e.preventDefault(),n.load_snippets()}))},init_remove_snippet(){n.picked_snippets.on("click",".wpcode-remove-snippet-item",(function(e){e.preventDefault();const t=o(this).closest(".wpcode-selected-snippet-item"),i=t.data("id");n.snippet_chooser.find('[value="'+i+'"]').prop("checked",!1),t.remove(),n.maybe_show_no_snippets()}))},init_search(){let e=null;n.search_input.on("keyup input cut paste",(function(t){clearTimeout(e),e=setTimeout((function(){n.load_snippets(!0)}),300)}))},get_selected_ids(){const e=[];return n.picked_snippets.find(".wpcode-selected-snippet-item").each((function(){e.push(o(this).data("id"))})),e},maybe_show_no_snippets(){n.picked_snippets.find(".wpcode-selected-snippet-item").length>0?n.no_snippets.hide():n.no_snippets.show()},init_drawer(){o(".wpcode-drawer-toggle").on("click",(function(e){e.preventDefault(),n.loaded_snippets||(n.load_snippets(),n.loaded_snippets=!0),o(this).closest(".wpcode-metabox-snippets").toggleClass("wpcode-snippet-chooser-closed")}))},init_hide_insert_number(){n.picked_snippets.on("change",".wpcode-auto-insert-location-picker",(function(){const e=o(this),t=e.closest(".wpcode-selected-snippet-item").find(".wpcode-auto-insert-number-wrap");wpcode.locations_number&&wpcode.locations_number.includes(e.val())?t.removeClass("wpcode-hidden"):t.addClass("wpcode-hidden")}))},init_refresh_revisions(){if(!wp.data)return;const e=wp.data.select("core/edit-post");if(!e)return;const t=e.isSavingMetaBoxes;var o=!1;wp.data.subscribe((function(){var e=t();o&&!e&&(n.revisions_dirty=!0),o=e}))},load_revisions(){const e=o("#wpcode-tab-revisions .wpcode-revisions-list-area");e.html('<div class="wpcode-loading-spinner"></div>'),o.post(ajaxurl,{action:"wpcode_load_revisions_list",_wpnonce:n.l18n.nonce,post_id:n.l18n.post_id}).then((function(t){t.success&&e.replaceWith(o(t.data.revisions))}))},init_revisions_listener(){o(e).on("wpcode-tab-change",(function(e,t){"wpcode-tab-revisions"===t&&n.revisions_dirty&&n.load_revisions()}))}};return n}(document,window,jQuery);e.init()},843:function(){jQuery((function(e){const t=e(".wpcode-smart-tags");t.on("click",".wpcode-insert-smart-tag",(function(o){o.preventDefault();const n=e(this).closest(".wpcode-smart-tags-dropdown").data("target");!function(t,o){if("undefined"==typeof WPCodeSnippetManager||"text"!==WPCodeSnippetManager.code_type||void 0===WPCodeSnippetManager.$text_editor)if(void 0!==window.wpcode_editor)void 0!==window.wpcode_editor[o]&&(window.wpcode_editor[o].codemirror.doc.replaceSelection(t),window.wpcode_editor[o].codemirror.save());else{const n=e("#"+o);n.val(n.val()+t)}else WPCodeSnippetManager.$text_editor.insertContent(t)}(e(this).data("tag"),n),t.trigger("wpcode_close_smart_tags_dropdown")}))}))},570:function(){(()=>{if(jQuery("#wpcode-metabox-snippets .postbox-header").on("click",(function(){window.wpcode_editor&&jQuery.each(window.wpcode_editor,(function(e,t){t.codemirror.refresh()}))})),void 0===wp.data)return;const e=wp.data.select("core/edit-post");if(null==e)return;let t=0,o=!1;wp.data.subscribe((()=>{if(void 0===e.areMetaBoxesInitialized)return;const o=e.areMetaBoxesInitialized();if(n(),o&&t<10){if(void 0===window.wpcode_editor)return;jQuery.each(window.wpcode_editor,(function(e,t){t.codemirror.refresh(),t.codemirror.on("blur",(function(e,t){e.save()}))})),t++}}));const n=()=>{if("undefined"==typeof wpcode||void 0===wpcode.scroll_to_metabox||!wpcode.scroll_to_metabox)return;const e=jQuery("#wpcode-metabox-snippets").offset().top;e>0&&!o&&(jQuery(".interface-navigable-region").animate({scrollTop:e-100},500),o=!0)}})()},624:function(){jQuery((function(e){e(".wpcode-admin-tabs-navigation").on("click",".wpcode-admin-tabs button",(function(t){t.preventDefault();const o=e(this).data("target");e(this).addClass("active").parent().siblings().find("button").removeClass("active"),e(document.getElementById(o)).addClass("active").siblings().removeClass("active"),e(document).trigger("wpcode-tab-change",o),window.wpcode_editor&&jQuery.each(window.wpcode_editor,(function(e,t){t.codemirror.refresh()}))}))}))},928:function(){jQuery((function(e){const t=e(".wpcode-smart-tags");let o;function n(){o.removeClass("wpcode-smart-tags-open"),e(document).off("click.wpcode")}t.on("click",".wpcode-smart-tags-toggle",(function(t){t.preventDefault();const i=e(this).closest(".wpcode-smart-tags");i.toggleClass("wpcode-smart-tags-open"),o=i,e(document).on("click.wpcode",(function(t){e(t.target).closest(".wpcode-smart-tags").length||n()}))})),t.on("wpcode_close_smart_tags_dropdown",n),"undefined"!=typeof WPCodeSnippetManager&&t.on("click",".wpcode-insert-smart-tag",(function(t){const o=e(this).closest(".wpcode-smart-tags-dropdown"),n=o.data("upgrade-title");if(n)return t.preventDefault(),t.stopImmediatePropagation(),WPCodeSnippetManager.show_pro_notice(n,o.data("upgrade-text"),o.data("upgrade-link"),o.data("upgrade-button")),!1}))}))}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";o(624),o(570),o(812),o(928),o(843)}()}();